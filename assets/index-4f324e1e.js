import{d as B,X as j,ac as M,D as R,W as V,h as w,r as b,F as U,G as z,J as t,H as i,K as a,L as s,N as I,O as l,a7 as u,a8 as d,I as A,_ as x,ad as H,a4 as P,a5 as W,ae as Y,E as $,Y as K,af as X,ag as q,ah as Q}from"./index-621d4336.js";function Z(){const v=new Date,r=v.getDate(),p=v.getMonth()+1;return`${v.getFullYear()}-${p}-${r}`}const ee={class:"p-4 space-y-5 min-h-[200px]"},te={class:"space-y-6"},se={class:"flex items-center space-x-4"},ae={class:"flex-shrink-0 w-[100px]"},ne={class:"flex-1"},oe={class:"flex items-center space-x-4"},le={class:"flex-shrink-0 w-[100px]"},ie={class:"w-[200px]"},re={class:"flex items-center space-x-4"},ce={class:"flex-shrink-0 w-[100px]"},ue={class:"flex-1"},de={class:"flex-shrink-0 w-[100px]"},pe={class:"flex flex-wrap items-center gap-4"},me={class:"flex items-center space-x-4"},fe={class:"flex-shrink-0 w-[100px]"},ve={class:"flex flex-wrap items-center gap-4"},ge={class:"flex items-center space-x-4"},he={class:"flex-shrink-0 w-[100px]"},ye={class:"flex flex-wrap items-center gap-4"},_e={class:"flex items-center space-x-4"},xe={class:"flex-shrink-0 w-[100px]"},ke=B({__name:"General",setup(v){const r=j(),p=M(),{isMobile:h}=R(),m=V(),y=w(()=>r.theme),c=w(()=>p.userInfo),f=b(c.value.avatar??""),C=b(c.value.name??""),S=b(c.value.description??""),D=w({get(){return r.language},set(e){r.setLanguage(e)}}),L=[{label:"Auto",key:"auto",icon:"ri:contrast-line"},{label:"Light",key:"light",icon:"ri:sun-foggy-line"},{label:"Dark",key:"dark",icon:"ri:moon-foggy-line"}],O=[{label:"简体中文",key:"zh-CN",value:"zh-CN"},{label:"繁體中文",key:"zh-TW",value:"zh-TW"},{label:"English",key:"en-US",value:"en-US"}];function N(e){p.updateUserInfo(e),m.success($("common.success"))}function T(){p.resetUserInfo(),m.success($("common.success")),window.location.reload()}function F(){const e=Z(),n=localStorage.getItem("chatStorage")||"{}",o=JSON.stringify(JSON.parse(n),null,2),g=new Blob([o],{type:"application/json"}),k=URL.createObjectURL(g),_=document.createElement("a");_.href=k,_.download=`chat-store_${e}.json`,document.body.appendChild(_),_.click(),document.body.removeChild(_)}function E(e){const n=e.target;if(!n||!n.files)return;const o=n.files[0];if(!o)return;const g=new FileReader;g.onload=()=>{try{const k=JSON.parse(g.result);localStorage.setItem("chatStorage",JSON.stringify(k)),m.success($("common.success")),location.reload()}catch{m.error($("common.invalidFileFormat"))}},g.readAsText(o)}function G(){localStorage.removeItem("chatStorage"),location.reload()}function J(){const e=document.getElementById("fileInput");e&&e.click()}return(e,n)=>(U(),z("div",ee,[t("div",te,[t("div",se,[t("span",ae,i(e.$t("setting.avatarLink")),1),t("div",ne,[a(s(I),{value:f.value,"onUpdate:value":n[0]||(n[0]=o=>f.value=o),placeholder:""},null,8,["value"])]),a(s(d),{size:"tiny",text:"",type:"primary",onClick:n[1]||(n[1]=o=>N({avatar:f.value}))},{default:l(()=>[u(i(e.$t("common.save")),1)]),_:1})]),t("div",oe,[t("span",le,i(e.$t("setting.name")),1),t("div",ie,[a(s(I),{value:C.value,"onUpdate:value":n[2]||(n[2]=o=>C.value=o),placeholder:""},null,8,["value"])]),a(s(d),{size:"tiny",text:"",type:"primary",onClick:n[3]||(n[3]=o=>N({name:C.value}))},{default:l(()=>[u(i(e.$t("common.save")),1)]),_:1})]),t("div",re,[t("span",ce,i(e.$t("setting.description")),1),t("div",ue,[a(s(I),{value:S.value,"onUpdate:value":n[4]||(n[4]=o=>S.value=o),placeholder:""},null,8,["value"])]),a(s(d),{size:"tiny",text:"",type:"primary",onClick:n[5]||(n[5]=o=>N({description:S.value}))},{default:l(()=>[u(i(e.$t("common.save")),1)]),_:1})]),t("div",{class:A(["flex items-center space-x-4",s(h)&&"items-start"])},[t("span",de,i(e.$t("setting.chatHistory")),1),t("div",pe,[a(s(d),{size:"small",onClick:F},{icon:l(()=>[a(s(x),{icon:"ri:download-2-fill"})]),default:l(()=>[u(" "+i(e.$t("common.export")),1)]),_:1}),t("input",{id:"fileInput",type:"file",style:{display:"none"},onChange:E},null,32),a(s(d),{size:"small",onClick:J},{icon:l(()=>[a(s(x),{icon:"ri:upload-2-fill"})]),default:l(()=>[u(" "+i(e.$t("common.import")),1)]),_:1}),a(s(H),{placement:"bottom",onPositiveClick:G},{trigger:l(()=>[a(s(d),{size:"small"},{icon:l(()=>[a(s(x),{icon:"ri:close-circle-line"})]),default:l(()=>[u(" "+i(e.$t("common.clear")),1)]),_:1})]),default:l(()=>[u(" "+i(e.$t("chat.clearHistoryConfirm")),1)]),_:1})])],2),t("div",me,[t("span",fe,i(e.$t("setting.theme")),1),t("div",ve,[(U(),z(P,null,W(L,o=>a(s(d),{key:o.key,size:"small",type:o.key===y.value?"primary":void 0,onClick:g=>s(r).setTheme(o.key)},{icon:l(()=>[a(s(x),{icon:o.icon},null,8,["icon"])]),_:2},1032,["type","onClick"])),64))])]),t("div",ge,[t("span",he,i(e.$t("setting.language")),1),t("div",ye,[a(s(Y),{style:{width:"140px"},value:D.value,options:O,onUpdateValue:n[6]||(n[6]=o=>s(r).setLanguage(o))},null,8,["value"])])]),t("div",_e,[t("span",xe,i(e.$t("setting.resetUserInfo")),1),a(s(d),{size:"small",onClick:T},{default:l(()=>[u(i(e.$t("common.reset")),1)]),_:1})])])]))}}),$e={class:"ml-2"},we={class:"min-h-[100px]"},Ce=B({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible"],setup(v,{emit:r}){const p=v,h=b("General"),m=w({get(){return p.visible},set(y){r("update:visible",y)}});return(y,c)=>(U(),K(s(Q),{show:m.value,"onUpdate:show":c[1]||(c[1]=f=>m.value=f),"auto-focus":!1,preset:"card",style:{width:"95%","max-width":"640px"}},{default:l(()=>[t("div",null,[a(s(X),{value:h.value,"onUpdate:value":c[0]||(c[0]=f=>h.value=f),type:"line",animated:""},{default:l(()=>[a(s(q),{name:"General",tab:"General"},{tab:l(()=>[a(s(x),{class:"text-lg",icon:"ri:file-user-line"}),t("span",$e,i(y.$t("setting.general")),1)]),default:l(()=>[t("div",we,[a(ke)])]),_:1})]),_:1},8,["value"])])]),_:1},8,["show"]))}});export{Ce as default};
